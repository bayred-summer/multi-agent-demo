# Global defaults
[defaults]
provider = "codex"
use_session = true
stream = true
timeout_level = "standard"
retry_attempts = 1
retry_backoff_s = 1.0

# Provider defaults
[providers.codex]
timeout_level = "standard"
retry_attempts = 1
use_session = true
exec_mode = "safe"

[providers.claude-minimax]
timeout_level = "standard"
retry_attempts = 1
use_session = true
permission_mode = "bypassPermissions"
include_partial_messages = false
print_stderr = false

[providers.gemini]
timeout_level = "standard"
retry_attempts = 2
use_session = false
adapter = "gemini-cli" # options: gemini-cli, google-genai, antigravity
model = "gemini-3-pro-preview"
auth_mode = "auto"
approval_mode = "auto_edit"
output_format = "stream-json"
prompt_via_stdin = true
yolo = false
no_browser = false
proxy = ""
no_proxy = ""
include_directories = []
print_stderr = true
mcp_callback_dir = ".gemini/mcp_bridge"
mcp_poll_interval_s = 0.25
mcp_timeout_s = 300.0
mcp_cleanup_response = true

# Friends Bar multi-agent config
[friends_bar]
name = "Friends Bar"
default_rounds = 4
start_agent = "duffy"
prompt_dir = "prompts"

[friends_bar.safety]
read_only = false
allowed_roots = []
command_allowlist = []
command_denylist = []
codex_sandbox_read_only = "read-only"
codex_sandbox_default = "workspace-write"
claude_tools_read_only = "Read"

[friends_bar.logging]
enabled = true
dir = ".friends-bar/logs"
include_prompt_preview = true
max_preview_chars = 1200

[friends_bar.history]
max_chars = 3000
field_max_chars = 400
evidence_limit = 3
issue_limit = 5
root_cause_limit = 3
include_key_changes = true

[friends_bar.agents.linabell]
provider = "codex"
response_mode = "execute"

[friends_bar.agents.linabell.provider_options]
exec_mode = "bypass"

[friends_bar.agents.duffy]
provider = "claude-minimax"
response_mode = "text_only"

[friends_bar.agents.duffy.provider_options]
permission_mode = "bypassPermissions"
include_partial_messages = false
print_stderr = false

[friends_bar.agents.stella]
provider = "gemini"
response_mode = "execute"

[friends_bar.agents.stella.provider_options]
adapter = "gemini-cli"
output_format = "stream-json"
approval_mode = "yolo"
sandbox = false
print_stderr = true
allowed_tools = [
  "run_shell_command",
  "list_directory",
  "read_file",
  "grep_search",
  "cli_help",
]

# Timeout profiles
[timeouts.quick]
idle_timeout_s = 60
max_timeout_s = 300
terminate_grace_s = 3

[timeouts.standard]
idle_timeout_s = 300
max_timeout_s = 1800
terminate_grace_s = 5

[timeouts.complex]
idle_timeout_s = 900
max_timeout_s = 3600
terminate_grace_s = 8
